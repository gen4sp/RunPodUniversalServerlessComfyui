# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ PyTorch 2.8.0 –∏ CUDA 12.8.1

## –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ RunPod —Å –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ PyTorch –∏ CUDA.

### –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑

**–°—Ç–∞—Ä—ã–π:** `runpod/worker-comfyui:5.3.0-base`
**–ù–æ–≤—ã–π:** `runpod/pytorch:2.8.0-py3.11-cuda12.8.1-cudnn-devel-ubuntu22.04`

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –í–µ—Ä—Å–∏–∏ –ü–û

-   **PyTorch:** –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ 2.8.0
-   **Python:** 3.11 (–≤–º–µ—Å—Ç–æ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏)
-   **CUDA:** 12.8.1 (—É–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö GPU)
-   **Ubuntu:** 22.04 LTS

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ ComfyUI

-   ComfyUI —Ç–µ–ø–µ—Ä—å –∫–ª–æ–Ω–∏—Ä—É–µ—Ç—Å—è –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–∞
-   –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ requirements.txt ComfyUI
-   –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–í—Å–µ Python –ø–∞–∫–µ—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –≤–µ—Ä—Å–∏–π:

-   `transformers>=4.45.0`
-   `diffusers>=0.30.0`
-   `accelerate>=1.0.0`
-   `onnxruntime-gpu>=1.19.0`
-   `opencv-python-headless>=4.10.0`
-   –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ...

#### 4. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏:

-   FFmpeg –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ
-   –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
-   –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–∑–∞

```
/
‚îú‚îÄ‚îÄ workspace/ComfyUI/    # ComfyUI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∑–¥–µ—Å—å (—Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã!)
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ models/           # –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω symlink –Ω–∞ volume
‚îÇ   ‚îú‚îÄ‚îÄ custom_nodes/     # –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω symlink –Ω–∞ volume
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ handler.py            # RunPod serverless handler
‚îú‚îÄ‚îÄ start.sh              # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ debug-modules.sh      # –°–∫—Ä–∏–ø—Ç –æ—Ç–ª–∞–¥–∫–∏
‚îî‚îÄ‚îÄ runpod-volume/ComfyUI/# Volume —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    ‚îú‚îÄ‚îÄ models/           # –ú–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îú‚îÄ‚îÄ custom_nodes/     # –ö–∞—Å—Ç–æ–º –Ω–æ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îú‚îÄ‚îÄ input/            # –í—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
    ‚îî‚îÄ‚îÄ output/           # –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

-   `COMFYUI_PATH=/workspace/ComfyUI` - –ø—É—Ç—å –∫ ComfyUI
-   `SKIP_MODEL_DOWNLOAD=1` - –ø—Ä–æ–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
-   `PYTHONUNBUFFERED=1` - –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –≤—ã–≤–æ–¥–∞ Python
-   `CUDA_VISIBLE_DEVICES=0` - –≤–∏–¥–∏–º—ã–µ GPU —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã**:

#### üöÄ Volume-First Mode (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

-   **–ö–æ–≥–¥–∞:** ComfyUI —É–∂–µ –µ—Å—Ç—å –Ω–∞ `/runpod-volume/ComfyUI/`
-   **–î–µ–π—Å—Ç–≤–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ComfyUI —Å volume –Ω–∞–ø—Ä—è–º—É—é
-   **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç, –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

#### üîß Hybrid Mode (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)

-   **–ö–æ–≥–¥–∞:** ComfyUI –ù–ï–¢ –Ω–∞ volume
-   **–î–µ–π—Å—Ç–≤–∏–µ:** –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π ComfyUI + –±—ã—Å—Ç—Ä–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ symlinks
-   **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ + –±—ã—Å—Ç—Ä–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** –°–º. [Volume Mounting Strategy](volume-mounting-strategy.md)

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

#### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ GPU

-   NVIDIA RTX 40xx —Å–µ—Ä–∏–∏ (Blackwell –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
-   NVIDIA RTX 30xx —Å–µ—Ä–∏–∏
-   NVIDIA RTX 20xx —Å–µ—Ä–∏–∏
-   Tesla V100, A100, H100
-   –í—Å–µ GPU —Å CUDA Compute Capability 6.1+

#### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

-   –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–µ–π—à–∏—Ö –º–æ–¥–µ–ª–µ–π (Flux, SDXL, SD3, –∏ –¥—Ä.)
-   –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è PyTorch 2.8.0
-   –õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–º–µ—à–∞–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ (FP16/FP8)
-   –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é GPU

### –°–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

```bash
docker build -t runpod-comfy-universal:new .
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
./test-build-new.sh
```

#### –ó–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
docker run --rm --gpus all -p 8188:8188 \
  -v $(pwd)/test-volume:/runpod-volume \
  runpod-comfy-universal:new
```

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏

1. **–ú–æ–¥–µ–ª–∏:** –í—Å–µ –º–æ–¥–µ–ª–∏ –≤ `/runpod-volume/ComfyUI/models/` –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã
2. **–ö–∞—Å—Ç–æ–º –Ω–æ–¥—ã:** –ö–∞—Å—Ç–æ–º –Ω–æ–¥—ã –∏–∑ `/runpod-volume/ComfyUI/custom_nodes/` –±—É–¥—É—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:** –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ `start.sh` —Å–∫—Ä–∏–ø—Ç

### –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫–∞—Å—Ç–æ–º –Ω–æ–¥–æ–≤:** –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞—Ä—ã–µ –∫–∞—Å—Ç–æ–º –Ω–æ–¥—ã –º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
2. **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞:** –Ω–æ–≤—ã–π –æ–±—Ä–∞–∑ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –∏–∑-–∑–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. **–ü–∞–º—è—Ç—å:** PyTorch 2.8.0 –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –±–æ–ª—å—à–µ GPU –ø–∞–º—è—Ç–∏ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### –†–µ—à–µ–Ω–∏—è

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `debug-modules.sh` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å –º–æ–¥—É–ª—è–º–∏
2. –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º –Ω–æ–¥—ã –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏–∏ —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏ –≤ ComfyUI

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ workflow
2. **–ú–æ–¥–µ–ª–∏:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –º–æ–¥–µ–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏
3. **–ö–∞—Å—Ç–æ–º –Ω–æ–¥—ã:** –û–±–Ω–æ–≤–∏—Ç–µ –∫–∞—Å—Ç–æ–º –Ω–æ–¥—ã —á–µ—Ä–µ–∑ ComfyUI-Manager
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–º—è—Ç–∏ GPU

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `debug-modules.sh` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ComfyUI –∏ RunPod
