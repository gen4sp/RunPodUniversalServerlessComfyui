# –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Volume –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –û–±–∑–æ—Ä

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å RunPod volume, –≥–¥–µ —É–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ComfyUI —Å –º–æ–¥–µ–ª—è–º–∏ –∏ –∫–∞—Å—Ç–æ–º –Ω–æ–¥–∞–º–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

#### 1. Volume-First Mode (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç volume)

**–ö–æ–≥–¥–∞:** ComfyUI —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `/runpod-volume/ComfyUI/`
**–î–µ–π—Å—Ç–≤–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ComfyUI —Å volume –Ω–∞–ø—Ä—è–º—É—é

```bash
APP=/runpod-volume/ComfyUI
ln -sf /runpod-volume/ComfyUI /workspace/ComfyUI  # –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

-   ‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
-   üíæ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
-   üîÑ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ volume
-   üì¶ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞—Å—Ç–æ–º –Ω–æ–¥—ã –∏ –º–æ–¥–µ–ª–∏ —Å volume

#### 2. Hybrid Mode (–ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º)

**–ö–æ–≥–¥–∞:** ComfyUI –ù–ï –Ω–∞–π–¥–µ–Ω –Ω–∞ volume
**–î–µ–π—Å—Ç–≤–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π ComfyUI —Å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
APP=/workspace/ComfyUI  # –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π
# –ë—ã—Å—Ç—Ä–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ symlinks:
ln -sf /runpod-volume/ComfyUI/models /workspace/ComfyUI/models
ln -sf /runpod-volume/ComfyUI/custom_nodes /workspace/ComfyUI/custom_nodes
ln -sf /runpod-volume/ComfyUI/input /workspace/ComfyUI/input
ln -sf /runpod-volume/ComfyUI/output /workspace/ComfyUI/output
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

-   üõ°Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ –æ–±—Ä–∞–∑–∞
-   ‚ö° –ë—ã—Å—Ç—Ä–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ symlinks (–Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ!)
-   üíæ –ú–æ–¥–µ–ª–∏ –∏ –∫–∞—Å—Ç–æ–º –Ω–æ–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ volume
-   üîÑ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

#### –í –æ–±—Ä–∞–∑–µ Docker:

```
/workspace/ComfyUI/          # –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π ComfyUI —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ comfy/
‚îú‚îÄ‚îÄ models/                  # –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω symlink'–æ–º
‚îú‚îÄ‚îÄ custom_nodes/           # –ú–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω symlink'–æ–º
‚îî‚îÄ‚îÄ ...
```

#### –ù–∞ RunPod Volume:

```
/runpod-volume/ComfyUI/     # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ main.py                 # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ models/                 # –ú–æ–¥–µ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ checkpoints/
‚îÇ   ‚îú‚îÄ‚îÄ loras/
‚îÇ   ‚îú‚îÄ‚îÄ vae/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ custom_nodes/          # –ö–∞—Å—Ç–æ–º –Ω–æ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ ComfyUI-Manager/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ input/                 # –í—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ output/                # –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ user/                  # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

## –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞

```bash
if [ -d "$VOL/ComfyUI" ] && [ -f "$VOL/ComfyUI/main.py" ]; then
    # Volume-First Mode
    APP="$VOL/ComfyUI"
    echo "‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º ComfyUI —Å volume"
else
    # Hybrid Mode
    APP="/workspace/ComfyUI"
    echo "üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π ComfyUI + –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"

    # –ë—ã—Å—Ç—Ä–æ–µ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ symlinks
    for dir in models custom_nodes input output user temp; do
        if [ -d "$VOL/ComfyUI/$dir" ]; then
            rm -rf "$APP/$dir"
            ln -sf "$VOL/ComfyUI/$dir" "$APP/$dir"
        fi
    done
fi
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞

| –ú–µ—Ç–æ–¥                    | –í—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞ |
| ------------------------ | ------------ | ------------------- |
| **rsync –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**    | 30-120 —Å–µ–∫   | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| **symlink –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | 1-3 —Å–µ–∫      | –ë–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è    |
| **Volume-first**         | <1 —Å–µ–∫       | –ù–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è     |

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

-   **Volume-First:** 0 –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
-   **Hybrid —Å symlinks:** ~500MB (—Ç–æ–ª—å–∫–æ ComfyUI core)
-   **–°—Ç–∞—Ä—ã–π rsync:** 2-10GB –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü–µ—Ä–µ–¥ –∑–∞–º–µ–Ω–æ–π —Å–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª
if [ -d "$APP/models" ] && [ ! -L "$APP/models" ]; then
    mv "$APP/models" "$APP/models.original"
fi
```

### –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ main.py —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if [ ! -f "$APP/main.py" ]; then
    echo "‚ùå ComfyUI –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ $APP"
    exit 1
fi
```

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

```bash
echo "–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º: $APP"
if [ "$APP" = "/runpod-volume/ComfyUI" ]; then
    echo "üü¢ Volume-First Mode"
else
    echo "üü° Hybrid Mode"
fi
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ symlinks

```bash
for dir in models custom_nodes input output; do
    if [ -L "$APP/$dir" ]; then
        echo "üìÅ $dir -> $(readlink $APP/$dir)"
    fi
done
```

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

```bash
# –†–∞–∑–º–µ—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
du -sh /workspace/ComfyUI/* 2>/dev/null || true
du -sh /runpod-volume/ComfyUI/* 2>/dev/null || true

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤
ls -la /workspace/ComfyUI/main.py
ls -la /runpod-volume/ComfyUI/main.py 2>/dev/null || echo "Volume ComfyUI not present"
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. –î–µ—Ä–∂–∏—Ç–µ ComfyUI –Ω–∞ volume –¥–ª—è Volume-First —Ä–µ–∂–∏–º–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–µ NVMe volumes –≤ RunPod
3. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π ComfyUI (Hybrid —Ä–µ–∂–∏–º)
2. –†–µ–≥—É–ª—è—Ä–Ω–æ –¥–µ–ª–∞–π—Ç–µ backup volume
3. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞—Å—Ç–æ–º –Ω–æ–¥—ã –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Volume-First –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π
2. –ú–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∫–∞—Å—Ç–æ–º –Ω–æ–¥–æ–≤
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ debug-modules.sh –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: ComfyUI –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∂–∏–º
echo "Current APP: $APP"
ls -la "$APP/main.py"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd "$APP" && python -c "import torch; print(torch.__version__)"
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º symlink –º–æ–¥–µ–ª–µ–π
ls -la "$APP/models"
find "$APP/models" -name "*.safetensors" | head -5
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞—Å—Ç–æ–º –Ω–æ–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º symlink –∫–∞—Å—Ç–æ–º –Ω–æ–¥–æ–≤
ls -la "$APP/custom_nodes"
cd "$APP" && python -c "import sys; print(sys.path)"
```
